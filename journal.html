<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journal | Suraj Gaud</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Animated Background -->
    <div class="background-gradients">
        <div class="gradient-blob blob-1"></div>
        <div class="gradient-blob blob-2"></div>
        <div class="gradient-blob blob-3"></div>
    </div>

    <!-- Glass Navbar -->
    <nav class="navbar">
        <a href="index.html" class="brand">
            <span class="brand-text-wrapper">
                <span class="brand-text-primary">Suraj Gaud</span>
                <span class="brand-text-secondary">सूरज गौड़</span>
            </span><span style="color: var(--accent-1)">.</span>
        </a>
    </nav>

    <main class="main-content journal-content">
        <div class="journal-container" id="journal-container">
            <!-- Content will be loaded dynamically -->
            <div style="text-align: center; color: var(--text-secondary); padding: 2rem;">Loading journal...</div>
        </div>
    </main>

    <!-- Social Dock Footer -->
    <footer class="social-dock-footer">
        <div class="social-dock">
            <a href="mailto:suraj.ug@gmail.com" class="social-icon" title="Email">
                <i class="fas fa-envelope"></i>
            </a>
            <a href="https://www.linkedin.com/in/surajgaud/" target="_blank" class="social-icon" title="LinkedIn">
                <i class="fab fa-linkedin"></i>
            </a>
            <a href="https://www.twitter.com/surajgaud_" target="_blank" class="social-icon" title="Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.instagram.com/surajgaud/?hl=en" target="_blank" class="social-icon" title="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="https://github.com/surajgaud" target="_blank" class="social-icon" title="GitHub">
                <i class="fab fa-github"></i>
            </a>
            <a href="javascript:void(0)" onclick="rickRoll()" class="social-icon" title="OnlyFans">
                <i class="fas fa-heart" style="color: #ff0055;"></i>
            </a>
        </div>
    </footer>

    <script>
        function rickRoll() {
            window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstley";
        }

        // Brand Name Animation Loop
        const brandWrapper = document.querySelector('.brand-text-wrapper');
        setInterval(() => {
            brandWrapper.classList.toggle('show-hindi');
        }, 4000);

        // Fetch and Parse Journal Data
        async function loadJournal() {
            try {
                const response = await fetch('data/journal.md');
                if (!response.ok) throw new Error('Failed to load journal data');
                const text = await response.text();
                renderJournal(text);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('journal-container').innerHTML = `
                    <div style="text-align: center; color: var(--accent-1); padding: 2rem;">
                        <p>Unable to load journal entries.</p>
                        <small>Note: If viewing locally, you need a local server (CORS).</small>
                    </div>`;
            }
        }

        function renderJournal(md) {
            const lines = md.split('\n');
            const container = document.getElementById('journal-container');
            container.innerHTML = ''; // Clear loading state

            let currentSection = null;
            let currentMonthDiv = null;
            let currentList = null;

            lines.forEach(line => {
                const trimmed = line.trim();

                // H1: Month Title (# Month Year)
                if (trimmed.startsWith('# ')) {
                    // Close previous month group if exists
                    if (currentMonthDiv) container.appendChild(currentSection);

                    const monthTitle = trimmed.substring(2);
                    const monthDiv = document.createElement('div');
                    monthDiv.className = 'month-block';
                    monthDiv.style.marginBottom = '60px';

                    const titleEl = document.createElement('h2');
                    titleEl.className = 'section-title'; // Reusing style
                    titleEl.textContent = monthTitle;
                    monthDiv.appendChild(titleEl);

                    container.appendChild(monthDiv);
                    currentMonthDiv = monthDiv;
                    currentSection = null; // Reset section context
                }
                // H2: Section Title (## Reading / ## Listening)
                else if (trimmed.startsWith('## ')) {
                    const sectionTitle = trimmed.substring(3);
                    const secDiv = document.createElement('div');
                    secDiv.className = 'journal-section-group';
                    secDiv.style.marginBottom = '30px';

                    const subTitle = document.createElement('h3');
                    subTitle.className = 'month-title'; // Reusing style for subsection header
                    subTitle.style.color = 'var(--text-primary)';
                    subTitle.style.fontSize = '1.2rem';
                    subTitle.textContent = sectionTitle;

                    currentList = document.createElement('ul');
                    currentList.className = 'journal-list';

                    secDiv.appendChild(subTitle);
                    secDiv.appendChild(currentList);

                    if (currentMonthDiv) {
                        currentMonthDiv.appendChild(secDiv);
                    } else {
                        // Fallback if no month defined yet
                        container.appendChild(secDiv);
                    }
                }
                // List Item (- [Title](url) | Meta)
                else if (trimmed.startsWith('- ')) {
                    if (currentList) {
                        // Regex to parse: - [Title](link) | Meta
                        const match = trimmed.match(/- \[(.*?)\]\((.*?)\)\s*\|\s*(.*)/);
                        if (match) {
                            const [_, text, url, meta] = match;
                            const li = document.createElement('li');
                            li.innerHTML = `
                                <a href="${url}" target="_blank" class="journal-link">
                                    <span class="link-text">${text}</span>
                                    <span class="link-meta">${meta}</span>
                                </a>
                            `;
                            currentList.appendChild(li);
                        }
                    }
                }
            });
        }

        window.addEventListener('DOMContentLoaded', loadJournal);
    </script>
</body>

</html>